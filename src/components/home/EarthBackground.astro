---
import { useTranslations } from "@i18n/util";
import StarAndForkV2 from "./StarAndForkV2/index.tsx";
import sendFetch from "@/utils/sendFetch";
import type { StarAndForkT } from 'src/types';
const t = useTranslations(Astro);

const { stargazers_count=0, forks_count=0 }:StarAndForkT = await sendFetch("https://api.github.com/repos/alibaba/nacos");
---

<div class="earth-background w-full h-[45rem]">
    <div class="relative w-full earth-background-cover">
        <div class="absolute top-[10rem] pt-[4rem] w-full text-center earth-background-cover-pre">
            <img
                class="h-[50px]"
                src="https://img.alicdn.com/imgextra/i4/O1CN01rW3vAB1FDWKSOiFf0_!!6000000000453-2-tps-204-40.png"
                alt="nacos-log"
            />

            <p class="earth-background-title text-lg text-center text-gray-01 mt-[2rem] leading-[1.5rem] px-2">
                {t('home.introduce.title')}
            </p>

            <div class="text-center mt-12">
                <div class="inline-block">
                    <StarAndForkV2 
                        client:load 
                        stargazers_count={stargazers_count} 
                        forks_count={forks_count} 
                        forkText={t("commmon.footer.actions.start")}
                    />
                </div>
            </div>
           
            <div class="mt-4 leading-[1.5rem]">
                <div>
                    <a
                        class="mr-2.5 text-xs text-gray-07 no-underline"
                        href="https://github.com/alibaba/nacos/releases/tag/2.4.0.1 "
                        target="_blank"
                    >
                            {t("home.introduce.nacos.release.note.1")}
                    </a>
                    |
                    <a
                        class="ml-2.5 text-xs text-gray-07 no-underline"
                        href="https://github.com/alibaba/nacos/releases/tag/1.4.7"
                        target="_blank"
                    >
                            {t("home.introduce.nacos.release.note.2.mobile")}
                    </a>
                </div>
                <span class="text-xs text-gray-09">{t("home.introduce.nacos.notes")}</span>
              </div>
        </div>
        <div class="absolute w-full earth-background-cover-img"></div>
    </div>
</div>

<style is:global>
    .earth-background {
        min-height: calc(100vh - 4rem);
        transition: all 2s;
        background: url('https://img.alicdn.com/imgextra/i1/O1CN01bK8pUi1qbStG6nCiT_!!6000000005514-0-tps-5760-2724.jpg') no-repeat;
        background-size: cover;
        background-position: top;
        .earth-background-cover {
            box-sizing: border-box;
        }

        .earth-background-cover > .earth-background-cover-img {
            top: 0;
            left: 0;
            min-height: calc(100vh - 4rem);
            transition: all 2s;
            background: url('https://img.alicdn.com/imgextra/i2/O1CN01RFd3Zh263940RBbkw_!!6000000007605-0-tps-5760-2724.jpg') no-repeat;
            background-size: cover;
            background-position: top;
            opacity: 0;
            z-index: 0;
        }

        .earth-background-cover-pre {
            z-index: 1;
        }
        .earth-background-cover-pre:hover+.earth-background-cover-img{
            opacity: 1;
        }

        .earth-background-title {
            opacity: 0.7;
            font-family: Roboto;
            font-weight: normal;
            letter-spacing: 0em;
        }
    }

    @media (min-height: 50rem) {
      .earth-background-cover-pre {
        top: 12rem!important;
      }
    }

    @media (min-height: 60rem) {
      .earth-background-cover-pre {
        top: 14rem!important;
      }
    }

    @media (max-width: 50rem) {
        .earth-background-cover{
            min-height: calc(100vh - 4rem);
            transition: all 2s;
            background: url('https://img.alicdn.com/imgextra/i1/O1CN01bK8pUi1qbStG6nCiT_!!6000000005514-0-tps-5760-2724.jpg') no-repeat;
            background-size: cover;
            background-position: -15rem -5rem!important;
            
        }
        .earth-background-cover-img {
            top: 0;
            left: 0;
            min-height: calc(100vh - 4rem);
            transition: all 2s;
            background: url('https://img.alicdn.com/imgextra/i2/O1CN01RFd3Zh263940RBbkw_!!6000000007605-0-tps-5760-2724.jpg') no-repeat;
            background-size: cover;
            background-position: -15rem -5rem!important;
            opacity: 0;
            z-index: 0;
        }
    }
</style>