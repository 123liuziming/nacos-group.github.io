---
id: "question-history-8438"
title: "大佬们，主中心和灾备中心用同一个数据库，但是集群是单独的，这样会影响服务调用吗？会不会出现调用混乱的情况 nacos-opensource"
date: "2024-04-23"
category: expertConsultation
description: "nacos-opensource 大佬们，主中心和灾备中心用同一个数据库，但是集群是单独的，这样会影响服务调用吗？会不会出现调用混乱的情况"
tags: ["主中心","灾备中心","同一个数据库","集群","单独","影响","服务调用","调用混乱"]
keywords: ["主中心","灾备中心","同一个数据库","集群","单独","影响","服务调用","调用混乱"]
---

## 用户问题 ： 
 大佬们，主中心和灾备中心用同一个数据库，但是集群是单独的，这样会影响服务调用吗？会不会出现调用混乱的情况 nacos-opensource 

---------------
## 专家官方解答 ：

不会出现调用混乱的情况。根据您提供的信息，主中心和灾备中心虽然使用同一个数据库，但它们各自运行在独立的集群中。这种部署方式在Nacos的使用场景中是可以接受的，只要确保数据同步机制正常运作，即可确保服务调用的正确性和一致性。

**原因分析：**

1. **数据一致性：** 主中心和灾备中心共享同一数据库，这意味着它们访问的是同一份服务注册与配置信息。只要数据库层面实现了实时或准实时的数据同步（如通过主从复制、双活等机制），两个中心看到的服务列表、配置数据应保持一致。因此，无论服务调用方连接的是主中心还是灾备中心，理论上都能获取到相同的服务发现结果和服务配置。

2. **服务调用路径：** 通常情况下，服务调用方会选择就近或通过负载均衡策略连接到某个Nacos集群（主中心或灾备中心）。一旦连接建立，服务调用方会基于接收到的服务列表进行正常的RPC调用。由于主中心和灾备中心数据一致，服务调用方无论连接哪个中心，得到的服务实例列表应该是相同的，进而调用的目标服务实例也是相同的，不会产生混乱。

3. **故障切换：** 在主中心发生故障时，服务调用方可以无缝切换至灾备中心获取服务信息。由于灾备中心使用的是同一数据库，数据已同步，服务调用方能够继续正确地发现并调用服务，不会因数据不同步导致调用异常或混乱。

**结论：**

基于上述分析，主中心和灾备中心使用同一个数据库，但在单独的集群中部署，只要保证数据库层面的数据同步有效，就不会影响服务调用，也不会出现调用混乱的情况。服务调用方在任一中心都能获得一致的服务发现结果和配置信息，从而进行正确的服务调用。在主中心故障时，灾备中心能够平滑接管，确保服务的连续性和稳定性。


<font color="#949494">---------------</font> 


## 参考链接 ：

*专家经验:NACOS 配置中心和注册中心是分两个集群部署还是放在一个集群中 
 
 *专家经验:Nacos 控制台下线按钮不符合预期问题 
 
 *专家经验:应用服务调用了依赖服务的提供者时，提示No provider或找不到服务等错误。 


 <font color="#949494">---------------</font> 
 


## <font color="#FF0000">答疑服务说明：</font> 

本内容经由技术专家审阅的用户问答的镜像生成，我们提供了<font color="#FF0000">专家智能答疑服务</font>，在<font color="#FF0000">页面的右下的浮窗”专家答疑“</font>。您也可以访问 : [全局专家答疑](https://opensource.alibaba.com/chatBot) 。 咨询其他产品的的问题

### 反馈
如问答有错漏，欢迎点：[差评](https://ai.nacos.io/user/feedbackByEnhancerGradePOJOID?enhancerGradePOJOId=11620)给我们反馈。
