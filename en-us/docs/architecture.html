<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="Nacos,architecture" />
	<meta name="description" content="Nacos architecture" />
	<!-- 网页标签标题 -->
	<title>Nacos architecture</title>
	<link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot="" data-reactid="1" data-react-checksum="-1152348533"><header class="header-container header-container-normal" data-reactid="2"><div class="header-body" data-reactid="3"><a href="/en-us/index.html" data-reactid="4"><img class="logo" src="/img/nacos_colorful.png" data-reactid="5"/></a><div class="search search-normal" data-reactid="6"><span class="icon-search" data-reactid="7"></span></div><span class="language-switch language-switch-normal" data-reactid="8">中</span><div class="header-menu" data-reactid="9"><img class="header-menu-toggle" src="/img/menu_gray.png" data-reactid="10"/><ul data-reactid="11"><li class="menu-item menu-item-normal" data-reactid="12"><a href="/en-us/index.html" data-reactid="13">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active" data-reactid="14"><a href="/en-us/docs/quick-start.html" data-reactid="15">DOCS</a></li><li class="menu-item menu-item-normal" data-reactid="16"><a href="/en-us/blog" data-reactid="17">BLOG</a></li><li class="menu-item menu-item-normal" data-reactid="18"><a href="/en-us/community" data-reactid="19">COMMUNITY</a></li><li class="menu-item menu-item-normal" data-reactid="20"><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" data-reactid="21">NACOS IN CLOUD</a><img class="menu-img" src="https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png" data-reactid="22"/></li><li class="menu-item menu-item-normal" data-reactid="23"><a href="https://job.alibaba.com/zhaopin/position_detail.htm?trace=qrcode_share&amp;positionCode=GP633620" data-reactid="24">HIRING</a><img class="menu-img" src="https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png" data-reactid="25"/></li><li class="menu-item menu-item-normal" data-reactid="26"><a href="http://console.nacos.io/nacos/index.html" data-reactid="27">DEMO-CONSOLE</a></li></ul></div></div></header><div class="bar" data-reactid="28"><div class="bar-body" data-reactid="29"><img src="/img/docs.png" class="front-img" data-reactid="30"/><div class="bar-title" data-reactid="31"><span data-reactid="32">Documentation</span><div class="bone bone-light" data-reactid="33"></div></div><img src="/img/docs.png" class="back-img" data-reactid="34"/></div></div><section class="content-section" data-reactid="35"><div class="content-body" data-reactid="36"><div class="sidemenu" data-reactid="37"><div class="sidemenu-toggle" data-reactid="38"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png" data-reactid="39"/></div><ul data-reactid="40"><li class="menu-item menu-item-level-1" data-reactid="41"><span data-reactid="42">Nacos </span><ul data-reactid="43"><li style="height:180px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="44"><span data-reactid="45"><!-- react-text: 46 -->What is Nacos<!-- /react-text --><img style="transform:rotate(0deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="47"/></span><ul data-reactid="48"><li class="menu-item menu-item-level-3" data-reactid="49"><a href="/en-us/docs/what-is-nacos.html" target="_self" data-reactid="50">What is Nacos</a></li><li class="menu-item menu-item-level-3" data-reactid="51"><a href="/en-us/docs/concepts.html" target="_self" data-reactid="52">Concepts</a></li><li class="menu-item menu-item-level-3" data-reactid="53"><a href="/en-us/docs/architecture.html" target="_self" data-reactid="54">Architecure</a></li><li class="menu-item menu-item-level-3" data-reactid="55"><a href="/en-us/docs/feature-list.html" target="_self" data-reactid="56">Feature list</a></li></ul></li><li style="height:324px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="57"><span data-reactid="58"><!-- react-text: 59 -->Quick Start<!-- /react-text --><img style="transform:rotate(0deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="60"/></span><ul data-reactid="61"><li class="menu-item menu-item-level-3" data-reactid="62"><a href="/en-us/docs/quick-start.html" target="_self" data-reactid="63">Nacos</a></li><li class="menu-item menu-item-level-3" data-reactid="64"><a href="/en-us/docs/quick-start-spring.html" target="_self" data-reactid="65">Nacos Spring</a></li><li class="menu-item menu-item-level-3" data-reactid="66"><a href="/en-us/docs/quick-start-spring-boot.html" target="_self" data-reactid="67">Nacos Spring Boot</a></li><li class="menu-item menu-item-level-3" data-reactid="68"><a href="/en-us/docs/quick-start-spring-cloud.html" target="_self" data-reactid="69">Nacos Spring Cloud</a></li><li class="menu-item menu-item-level-3" data-reactid="70"><a href="/en-us/docs/quick-start-docker.html" target="_self" data-reactid="71">Nacos Docker</a></li><li class="menu-item menu-item-level-3" data-reactid="72"><a href="/en-us/docs/use-nacos-with-dubbo.html" target="_self" data-reactid="73">Nacos with Dubbo</a></li><li class="menu-item menu-item-level-3" data-reactid="74"><a href="/en-us/docs/use-nacos-with-kubernetes.html" target="_self" data-reactid="75">Nacos with K8s</a></li><li class="menu-item menu-item-level-3" data-reactid="76"><a href="/en-us/docs/nacos-sync.html" target="_self" data-reactid="77">Nacos Sync</a></li></ul></li><li style="height:252px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="78"><span data-reactid="79"><!-- react-text: 80 -->User Guide<!-- /react-text --><img style="transform:rotate(0deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="81"/></span><ul data-reactid="82"><li class="menu-item menu-item-level-3" data-reactid="83"><a href="/en-us/docs/sdk.html" target="_self" data-reactid="84">Java SDK</a></li><li class="menu-item menu-item-level-3" data-reactid="85"><a href="/en-us/docs/other-language.html" target="_self" data-reactid="86">Other Language</a></li><li class="menu-item menu-item-level-3" data-reactid="87"><a href="/en-us/docs/open-api.html" target="_self" data-reactid="88">Open-API</a></li><li class="menu-item menu-item-level-3" data-reactid="89"><a href="/en-us/docs/nacos-spring.html" target="_self" data-reactid="90">Nacos Spring</a></li><li class="menu-item menu-item-level-3" data-reactid="91"><a href="/en-us/docs/system-configurations.html" target="_self" data-reactid="92">Nacos System Configurations</a></li><li class="menu-item menu-item-level-3" data-reactid="93"><a href="/en-us/docs/faq.html" target="_self" data-reactid="94">FAQ</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="95"><span data-reactid="96"><!-- react-text: 97 -->Admin Guide<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="98"/></span><ul data-reactid="99"><li class="menu-item menu-item-level-3" data-reactid="100"><a href="/en-us/docs/deployment.html" target="_self" data-reactid="101">Deployment Guide</a></li><li class="menu-item menu-item-level-3" data-reactid="102"><a href="/en-us/docs/cluster-mode-quick-start.html" target="_self" data-reactid="103">Cluster Mode Deployment</a></li><li class="menu-item menu-item-level-3" data-reactid="104"><a href="/en-us/docs/management-api.html" target="_self" data-reactid="105">Management OpenAPI</a></li><li class="menu-item menu-item-level-3" data-reactid="106"><a href="/en-us/docs/console-guide.html" target="_self" data-reactid="107">Admin Console Guide</a></li><li class="menu-item menu-item-level-3" data-reactid="108"><a href="/en-us/docs/monitor-guide.html" target="_self" data-reactid="109">Nacos Monitor Guide</a></li><li class="menu-item menu-item-level-3" data-reactid="110"><a href="/en-us/docs/nacos-config-benchmark.html" target="_self" data-reactid="111">Nacos Config Benchmark</a></li><li class="menu-item menu-item-level-3" data-reactid="112"><a href="/en-us/docs/nacos-naming-benchmark.html" target="_self" data-reactid="113">Nacos Naming Benchmark</a></li><li class="menu-item menu-item-level-3" data-reactid="114"><a href="/en-us/docs/nacos-sync-use.html" target="_self" data-reactid="115">Data Migration to Nacos</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="116"><span data-reactid="117"><!-- react-text: 118 -->Contributor Guide<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="119"/></span><ul data-reactid="120"><li class="menu-item menu-item-level-3" data-reactid="121"><a href="/en-us/docs/contributing.html" target="_self" data-reactid="122">Contribute to Nacos</a></li><li class="menu-item menu-item-level-3" data-reactid="123"><a href="/en-us/docs/contributing-flow.html" target="_self" data-reactid="124">Contributing Flow</a></li><li class="menu-item menu-item-level-3" data-reactid="125"><a href="/en-us/docs/pull-request.html" target="_self" data-reactid="126">Pull Request Template</a></li><li class="menu-item menu-item-level-3" data-reactid="127"><a href="/en-us/docs/how-to-reporting-bugs.html" target="_self" data-reactid="128">How to report bugs</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="129"><span data-reactid="130"><!-- react-text: 131 -->Community<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="132"/></span><ul data-reactid="133"><li class="menu-item menu-item-level-3" data-reactid="134"><a href="/en-us/docs/community.html" target="_self" data-reactid="135">Community</a></li><li class="menu-item menu-item-level-3" data-reactid="136"><a href="/en-us/docs/nacos-dev.html" target="_self" data-reactid="137">Develop Team</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body" data-reactid="138"><h1>Nacos architecture</h1>
<h2>Basic Architecture and Concepts</h2>
<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/338441/1561217892717-1418fb9b-7faa-4324-87b9-f1740329f564.jpeg" alt="nacos_arch.jpg"></p>
<h3>Service</h3>
<p>A software function or a set of software functions (such as the retrieval of specified information or the execution of a set of operations) with the purpose that different clients can be reused for different purposes (for example, through a cross-process network call). Nacos supports almost all types of services:
<a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes Service</a></p>
<p><a href="https://grpc.io/docs/guides/concepts.html#service-definition">gRPC</a>
<a href="https://dubbo.incubator.apache.org/#/?lang=en-us"> | Dubbo RPC Service</a></p>
<p><a href="https://spring.io/understanding/REST">Spring Cloud RESTful Service</a></p>
<h3>Service Registry</h3>
<p>The database of services, instances and metadata. Service instances are registered with the service registry on startup and deregistered on shutdown. Clients of the service and/or routers query the service registry to find the available instances of a service. A service registry might invoke a service instances health check API to verify that it is able to handle requests.</p>
<h3>Service Metadata</h3>
<p>Data describing services such as service endpoints, service labels, service version, service instance weights, routing rules, security policies.</p>
<h3>Service Provider</h3>
<p>A process or application which provides reusable and callable services.</p>
<h3>Service Consumer</h3>
<p>A process or application which initiates a call to a service.</p>
<h3>Configuration</h3>
<p>During system development, developers usually extract some parameters or variables that need to be changed from the code and manage them in a separate configuration file. This enables the static system artifacts or deliverables (such as WAR and JAR packages) to fit with the physical operating environment in a better way. Configuration management is generally a part of system deployment, which is executed by the administrator or operation and maintenance personnel. Configuration modification is an effective method to adjust the behavior of a running system.</p>
<h3>Configuration Management</h3>
<p>In the data center, all configuration-related activities such as editing, storage, distribution, change management, history version management, and change audit are collectively referred to as configuration management.</p>
<h3>Naming Service</h3>
<p>Mapping the &quot;names&quot; of all the objects and entities in the distributed system to the associated metadata, for example, <code>ServiceName</code> -&gt; <code>Endpoints\Version etc...</code>, <code>Distributed Lock Name</code> -&gt; <code>Lock Owner/Status Info</code>, <code>DNS Domain Name</code> -&gt; <code>IP List</code>. Service discovery and DNS are the two major scenarios of naming service.</p>
<h3>Configuration Service</h3>
<p>Providing dynamic configuration, service metadata and configuration management for other services or application.</p>
<h3><a href="./concepts.md">More concepts...</a></h3>
<h2>Introduction to logical architecture and its components</h2>
<p><img src="https://cdn.nlark.com/yuque/0/2019/png/338441/1561217775318-6e408805-18bb-4242-b4e9-83c5b929b469.png" alt="nacos-logic.jpg"></p>
<ul>
<li>Service Management: Implement services CRUD, domain name CRUD, service health check, service weight management, etc.</li>
<li>Configuration Management: Implement configuration CRUD, version management, grayscale management, monitoring management, push trajectory, aggregate data, etc.</li>
<li>Metadata Management: Provides metadata CURD and marking capabilities</li>
<li>Plug-in mechanism: implements three modules to share the ability to implement the extended point SPI mechanism</li>
<li>Event mechanism: implement asynchronous event notification, sdk data change asynchronous notification and other logic</li>
<li>Log module: Manage log classification, log level, log portability (especially to avoid conflicts), log format, exception code + help documentation</li>
<li>Callback mechanism: sdk informs the data and calls back user processing through a unified mode. Interface and data structures need to be scalable</li>
<li>Addressing mode: solve various addressing modes such as ip, domain name, nameserver, broadcast, etc., need to be expandable</li>
<li>Push channel: solve the push performance problem between server and storage, server, server and sdk</li>
<li>Capacity management: manage each tenant, the capacity under the group, prevent the storage from being blasted, affecting service availability</li>
<li>Traffic management: control the request frequency, the number of long links, the size of the message, and request flow control according to multiple dimensions such as tenant and group.</li>
<li>Caching mechanism: disaster recovery directory, local cache, server cache mechanism. Disaster recovery catalogue requires tools</li>
<li>Startup mode: Start different programs + UI according to stand-alone mode, configuration mode, service mode, dns mode, or all mode</li>
<li>Consistency Protocol: Resolve different data, different consistency requirements, different consistency mechanisms</li>
<li>Storage module: solve data persistence, non-persistent storage, solve data fragmentation problem</li>
<li>Nameserver: Resolve the routing problem from namespace to clusterid, solve the mapping problem between user environment and nacos physical environment</li>
<li>CMDB: Solve the metadata storage, docking problems with the three-party cmdb system, solving applications, people, resource relationships</li>
<li>Metrics: Exposes standard metrics data for easy access to three-way monitoring systems</li>
<li>Trace: Exposure standard trace, easy to open with SLA system, log whitening, push trajectory, etc., and can be connected with metering and billing system</li>
<li>Access management: equivalent to Ali cloud service, assign identity, capacity, authority process</li>
<li>User Management: Resolve issues such as user management, login, sso, etc.</li>
<li>Rights Management: Resolve issues such as identity, access control, role management, etc.</li>
<li>Audit system: extended interface facilitates access to different company audit systems</li>
<li>Notification system: Core data changes, or operations, facilitated through the SMS system, notify the corresponding person data changes</li>
<li>OpenAPI: exposes the standard Rest style HTTP interface, easy to use, and easy for multi-language integration</li>
<li>Console: easy to use console, do service management, configuration management, etc.</li>
<li>SDK: Multilingual sdk</li>
<li>Agent: dns-f similar mode, or integration with mesh and other programs</li>
<li>CLI: Lightweight management of the product on the command line, as easy as git</li>
</ul>
<h2>Domain Model</h2>
<h3>Data Model</h3>
<p>The Nacos data model Key is uniquely determined by the triplet. The Namespace defaults to an empty string, the public namespace (public), and the group defaults to DEFAULT_GROUP.</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/338441/1561217857314-95ab332c-acfb-40b2-957a-aae26c2b5d71.jpeg" alt="nacos_data_model"></p>
<h3>Service Entity Relationship Model</h3>
<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/338441/1561217924697-ba504a35-129f-4fc6-b0df-1130b995375a.jpeg" alt="nacos_naming_data_model"></p>
<h3>Config Entity Relationship Model</h3>
<p>Around the configuration, there are mainly two associated entities, one is the configuration change history, and the other is the service tag (used for marking classification, convenient for indexing), which is associated by ID.</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/338441/1561217958896-4465757f-f588-4797-9c90-a76e604fabb4.jpeg" alt="nacos_config_er"></p>
<h2>Class view</h2>
<h3>Nacos-SDK Class view</h3>
<p>// TODO Service part to be continued</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/338441/1561218077514-bfa98d03-88a1-43b9-b014-1491406e3db7.jpeg" alt="nacos_sdk_class_relation"></p>
<h2>Artifacts, Deployment, and Start Mode</h2>
<p><img src="https://cdn.yuque.com/lark/0/2018/png/15914/1531730742844-e8325932-258b-49b2-9473-8d1199efe20d.png" alt="undefined"></p>
<h3>Two Artifacts</h3>
<p>Nacos supports both standard Docker images (v0.2.0) and nacos-.zip(tar.gz). You can choose the appropriate build to deploy the Nacos service according to your needs.</p>
<h3>Two Start Modes</h3>
<p>Nacos supports two start modes. you can merging the Service Registry and the Config Center in one process or deploying them in separately cluster.</p>
<h3>Free Public Cloud Service on Alibaba Cloud</h3>
<p>In addition to deploying and launching Nacos services by users themselves, Nacos also supports public cloud. Nacos public cloud service will be free in Alibaba Cloud's commercial service (such as <a href="https://www.aliyun.com/product/acm">ACM</a>, <a href="https://www.aliyun.com/product/edas">EDAS</a>). We also welcome other public cloud providers to offer Nacos public cloud services.</p>
</div></div></section><footer class="footer-container" data-reactid="139"><div class="footer-body" data-reactid="140"><img src="/img/nacos_gray.png" data-reactid="141"/><div class="cols-container" data-reactid="142"><div class="col col-12" data-reactid="143"><h3 data-reactid="144">Vision</h3><p data-reactid="145">By providing an easy-to-use service infrastructure such as dynamic service discovery, service configuration, service sharing and management and etc., Nacos help users better construct, deliver and manage their own service platform, reuse and composite business service faster and deliver value of business innovation more quickly so as to win market for users in the era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div><div class="col col-6" data-reactid="146"><dl data-reactid="147"><dt data-reactid="148">Documentation</dt><dd data-reactid="149"><a href="/en-us/docs/what-is-nacos.html" target="_self" data-reactid="150">Overview</a></dd><dd data-reactid="151"><a href="/en-us/docs/quick-start.html" target="_self" data-reactid="152">Quick start</a></dd><dd data-reactid="153"><a href="/en-us/docs/contributing.html" target="_self" data-reactid="154">Developer guide</a></dd></dl></div><div class="col col-6" data-reactid="155"><dl data-reactid="156"><dt data-reactid="157">Resources</dt><dd data-reactid="158"><a href="/en-us/community/index.html" target="_self" data-reactid="159">Community</a></dd><dd data-reactid="160"><a href="https://www.aliyun.com/product/acm?source_type=nacos_pc_20181219" target="_self" data-reactid="161">Cloud Service ACM</a></dd><dd data-reactid="162"><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target="_self" data-reactid="163">Cloud Service EDAS</a></dd><dd data-reactid="164"><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target="_self" data-reactid="165">Cloud Service AHAS</a></dd></dl></div></div><div class="copyright" data-reactid="166"><span data-reactid="167">@ 2018 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>