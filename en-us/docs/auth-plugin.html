<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="Authorization, Plugin" />
	<meta name="description" content="This article describes how to develop and use Nacos&#39; authentication plugin." />
	<!-- 网页标签标题 -->
	<title>Authorization Plugin</title>
	<link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot="" data-reactid="1" data-react-checksum="-1457975297"><header class="header-container header-container-normal" data-reactid="2"><div class="header-body" data-reactid="3"><a href="/en-us/index.html" data-reactid="4"><img class="logo" src="/img/nacos_colorful.png" data-reactid="5"/></a><div class="search search-normal" data-reactid="6"><span class="icon-search" data-reactid="7"></span></div><span class="language-switch language-switch-normal" data-reactid="8">中</span><div class="header-menu" data-reactid="9"><img class="header-menu-toggle" src="/img/menu_gray.png" data-reactid="10"/><ul data-reactid="11"><li class="menu-item menu-item-normal" data-reactid="12"><span data-reactid="13"><a href="/en-us/index.html" data-reactid="14">HOME</a></span></li><li class="menu-item menu-item-normal menu-item-normal-active" data-reactid="15"><span data-reactid="16"><a href="/en-us/docs/quick-start.html" data-reactid="17">DOCS</a></span></li><li class="menu-item menu-item-normal" data-reactid="18"><div class="nav-container" data-reactid="19"><div class="word" data-reactid="20"><a data-reactid="21">SOLUTIONS</a><img class="menu-img" src="https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png" data-reactid="22"/></div><ul class="sub-nav-container" style="width:290px;" data-reactid="23"><li data-reactid="24"><a href="https://www.alibabacloud.com/product/microservices-engine" target="_blank" data-reactid="25">Microservice Solution</a></li><li data-reactid="26"><a href="https://cn.aliyun.com/product/aliware/sae?spm=nacos-website.topbar.0.0.0" target="_blank" data-reactid="27">Microservice on Serverless Solution</a></li><li data-reactid="28"><a href="https://www.aliyun.com/product/edas?spm=nacos-website.topbar.0.0.0" target="_blank" data-reactid="29">PaaS Solution</a></li><li data-reactid="30"><a href="https://www.aliyun.com/aliware/txc?spm=nacos-website.topbar.0.0.0" target="_blank" data-reactid="31">Distributed transaction Solution</a></li><li data-reactid="32"><a href="https://www.aliyun.com/product/ahas?spm=nacos-website.topbar.0.0.0" target="_blank" data-reactid="33">High-availability Solution</a></li><li data-reactid="34"><a href="https://www.aliyun.com/product/servicemesh?spm=nacos-website.topbar.0.0.0" target="_blank" data-reactid="35">Service mesh Solution</a></li></ul><!-- react-text: 36 --> <!-- /react-text --></div></li><li class="menu-item menu-item-normal" data-reactid="37"><span data-reactid="38"><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" data-reactid="39">NACOS IN CLOUD</a><img class="menu-img" src="https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png" data-reactid="40"/></span></li><li class="menu-item menu-item-normal" data-reactid="41"><span data-reactid="42"><a href="https://developer.aliyun.com/ebook/36?spm=a2c6h.20345107.ebook-index.18.152c2984fsi5ST" data-reactid="43">E-BOOK-NACOS</a><img class="menu-img" src="https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png" data-reactid="44"/></span></li><li class="menu-item menu-item-normal" data-reactid="45"><span data-reactid="46"><a href="/en-us/blog" data-reactid="47">BLOG</a></span></li><li class="menu-item menu-item-normal" data-reactid="48"><span data-reactid="49"><a href="/en-us/community" data-reactid="50">COMMUNITY</a></span></li><li class="menu-item menu-item-normal" data-reactid="51"><span data-reactid="52"><a href="http://console.nacos.io/nacos/index.html" data-reactid="53">DEMO-CONSOLE</a></span></li></ul></div></div></header><div class="bar" data-reactid="54"><div class="bar-body" data-reactid="55"><img src="/img/docs.png" class="front-img" data-reactid="56"/><div class="bar-title" data-reactid="57"><span data-reactid="58">Documentation</span><div class="bone bone-light" data-reactid="59"></div></div><img src="/img/docs.png" class="back-img" data-reactid="60"/></div></div><section class="content-section" data-reactid="61"><div class="content-body" data-reactid="62"><div class="sidemenu" data-reactid="63"><div class="sidemenu-toggle" data-reactid="64"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png" data-reactid="65"/></div><ul data-reactid="66"><li class="menu-item menu-item-level-1" data-reactid="67"><span data-reactid="68">Nacos </span><ul data-reactid="69"><li style="height:180px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="70"><span data-reactid="71"><!-- react-text: 72 -->What is Nacos<!-- /react-text --><img style="transform:rotate(0deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="73"/></span><ul data-reactid="74"><li class="menu-item menu-item-level-3" data-reactid="75"><a href="/en-us/docs/what-is-nacos.html" target="_self" data-reactid="76">What is Nacos</a></li><li class="menu-item menu-item-level-3" data-reactid="77"><a href="/en-us/docs/concepts.html" target="_self" data-reactid="78">Concepts</a></li><li class="menu-item menu-item-level-3" data-reactid="79"><a href="/en-us/docs/architecture.html" target="_self" data-reactid="80">Architecure</a></li><li class="menu-item menu-item-level-3" data-reactid="81"><a href="/en-us/docs/feature-list.html" target="_self" data-reactid="82">Feature list</a></li></ul></li><li style="height:180px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="83"><span data-reactid="84"><!-- react-text: 85 -->Nacos 2.0<!-- /react-text --><img style="transform:rotate(0deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="86"/></span><ul data-reactid="87"><li class="menu-item menu-item-level-3" data-reactid="88"><a href="/en-us/docs/2.0.0-compatibility.html" target="_self" data-reactid="89">Compatibility&amp;Usage</a></li><li class="menu-item menu-item-level-3" data-reactid="90"><a href="/en-us/docs/2.0.0-upgrading.html" target="_self" data-reactid="91">Upgrading</a></li><li class="menu-item menu-item-level-3" data-reactid="92"><a href="/en-us/docs/auth-plugin.html" target="_self" data-reactid="93">Authentication Plugin</a></li><li class="menu-item menu-item-level-3" data-reactid="94"><a href="/en-us/docs/config-encryption.html" target="_self" data-reactid="95">Configure Encryption Plugin</a></li></ul></li><li style="height:324px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="96"><span data-reactid="97"><!-- react-text: 98 -->Quick Start<!-- /react-text --><img style="transform:rotate(0deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="99"/></span><ul data-reactid="100"><li class="menu-item menu-item-level-3" data-reactid="101"><a href="/en-us/docs/quick-start.html" target="_self" data-reactid="102">Nacos</a></li><li class="menu-item menu-item-level-3" data-reactid="103"><a href="/en-us/docs/quick-start-spring.html" target="_self" data-reactid="104">Nacos Spring</a></li><li class="menu-item menu-item-level-3" data-reactid="105"><a href="/en-us/docs/quick-start-spring-boot.html" target="_self" data-reactid="106">Nacos Spring Boot</a></li><li class="menu-item menu-item-level-3" data-reactid="107"><a href="/en-us/docs/quick-start-spring-cloud.html" target="_self" data-reactid="108">Nacos Spring Cloud</a></li><li class="menu-item menu-item-level-3" data-reactid="109"><a href="/en-us/docs/quick-start-docker.html" target="_self" data-reactid="110">Nacos Docker</a></li><li class="menu-item menu-item-level-3" data-reactid="111"><a href="/en-us/docs/use-nacos-with-dubbo.html" target="_self" data-reactid="112">Nacos with Dubbo</a></li><li class="menu-item menu-item-level-3" data-reactid="113"><a href="/en-us/docs/use-nacos-with-kubernetes.html" target="_self" data-reactid="114">Nacos with K8s</a></li><li class="menu-item menu-item-level-3" data-reactid="115"><a href="/en-us/docs/nacos-sync.html" target="_self" data-reactid="116">Nacos Sync</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="117"><span data-reactid="118"><!-- react-text: 119 -->User Guide<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="120"/></span><ul data-reactid="121"><li class="menu-item menu-item-level-3" data-reactid="122"><a href="/en-us/docs/sdk.html" target="_self" data-reactid="123">Java SDK</a></li><li class="menu-item menu-item-level-3" data-reactid="124"><a href="/en-us/docs/other-language.html" target="_self" data-reactid="125">Other Language</a></li><li class="menu-item menu-item-level-3" data-reactid="126"><a href="/en-us/docs/open-api.html" target="_self" data-reactid="127">Open-API</a></li><li class="menu-item menu-item-level-3" data-reactid="128"><a href="/en-us/docs/nacos-spring.html" target="_self" data-reactid="129">Nacos Spring</a></li><li class="menu-item menu-item-level-3" data-reactid="130"><a href="/en-us/docs/system-configurations.html" target="_self" data-reactid="131">Nacos System Configurations</a></li><li class="menu-item menu-item-level-3" data-reactid="132"><a href="/en-us/docs/auth.html" target="_self" data-reactid="133">Authentication</a></li><li class="menu-item menu-item-level-3" data-reactid="134"><a href="/en-us/docs/faq.html" target="_self" data-reactid="135">FAQ</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="136"><span data-reactid="137"><!-- react-text: 138 -->Admin Guide<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="139"/></span><ul data-reactid="140"><li class="menu-item menu-item-level-3" data-reactid="141"><a href="/en-us/docs/deployment.html" target="_self" data-reactid="142">Deployment Guide</a></li><li class="menu-item menu-item-level-3" data-reactid="143"><a href="/en-us/docs/cluster-mode-quick-start.html" target="_self" data-reactid="144">Cluster Mode Deployment</a></li><li class="menu-item menu-item-level-3" data-reactid="145"><a href="/en-us/docs/management-api.html" target="_self" data-reactid="146">Management OpenAPI</a></li><li class="menu-item menu-item-level-3" data-reactid="147"><a href="/en-us/docs/console-guide.html" target="_self" data-reactid="148">Admin Console Guide</a></li><li class="menu-item menu-item-level-3" data-reactid="149"><a href="/en-us/docs/monitor-guide.html" target="_self" data-reactid="150">Nacos Monitor Guide</a></li><li class="menu-item menu-item-level-3" data-reactid="151"><a href="/en-us/docs/nacos-config-benchmark.html" target="_self" data-reactid="152">Nacos Config Benchmark</a></li><li class="menu-item menu-item-level-3" data-reactid="153"><a href="/en-us/docs/nacos2-config-benchmark.html" target="_self" data-reactid="154">Nacos2.0 Config Benchmark</a></li><li class="menu-item menu-item-level-3" data-reactid="155"><a href="/en-us/docs/nacos-naming-benchmark.html" target="_self" data-reactid="156">Nacos Naming Benchmark</a></li><li class="menu-item menu-item-level-3" data-reactid="157"><a href="/en-us/docs/nacos2-naming-benchmark.html" target="_self" data-reactid="158">Nacos2.0 Naming Benchmark</a></li><li class="menu-item menu-item-level-3" data-reactid="159"><a href="/en-us/docs/nacos-sync-use.html" target="_self" data-reactid="160">Data Migration to Nacos</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="161"><span data-reactid="162"><!-- react-text: 163 -->Contributor Guide<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="164"/></span><ul data-reactid="165"><li class="menu-item menu-item-level-3" data-reactid="166"><a href="/en-us/docs/contributing.html" target="_self" data-reactid="167">Contribute to Nacos</a></li><li class="menu-item menu-item-level-3" data-reactid="168"><a href="/en-us/docs/contributing-flow.html" target="_self" data-reactid="169">Contributing Flow</a></li><li class="menu-item menu-item-level-3" data-reactid="170"><a href="/en-us/docs/pull-request.html" target="_self" data-reactid="171">Pull Request Template</a></li><li class="menu-item menu-item-level-3" data-reactid="172"><a href="/en-us/docs/how-to-reporting-bugs.html" target="_self" data-reactid="173">How to report bugs</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="174"><span data-reactid="175"><!-- react-text: 176 -->Community<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="177"/></span><ul data-reactid="178"><li class="menu-item menu-item-level-3" data-reactid="179"><a href="/en-us/docs/community.html" target="_self" data-reactid="180">Community</a></li><li class="menu-item menu-item-level-3" data-reactid="181"><a href="/en-us/docs/nacos-dev.html" target="_self" data-reactid="182">Develop Team</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body" data-reactid="183"><h1>Authorization Plugin</h1>
<p>Since version 2.1.0, Nacos support to inject authentication plugins through <a href="https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html">SPI</a>, and select a plugin implementation in the configuration file <code>application.properties</code> as the actual authentication service. This document will describe how to implement an authentication plugin and how to make it work.</p>
<blockquote>
<p>Attention:
At present, the authentication plugin is still in the beta stage, and its API and interface definitions maybe modified with version upgrades. Please pay attention to the applicable version of your plugin.</p>
</blockquote>
<h2>Concepts in Authentication Plugins</h2>
<p>Authentication, the common expression is to verify whether <strong>who</strong> can perform <strong>some operation</strong> on <strong>something</strong>. So when Nacos designs the authentication plugin, the authentication information abstracted as three main concepts: <code>identity context</code>, <code>resource</code> and <code>action type</code>.</p>
<h3>IdentityContext</h3>
<p>IdentityContext is the abstraction of the request originator in the Nacos authentication plugin. Due to different plugin implementations, the identity context may be different, for example, username and password are one type of identity information, and accessToken is another type of identity information. Therefore, the IdentityContext does not limit the specific size and key. The plugin implementation can customize any size and keywords. Nacos will automatically obtain the identity keywords defined by the plugin implementation and their corresponding value from the request and inject them into IdentityContext which will be used in plugins.</p>
<p>IdentityContext must include:</p>
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>remote_ip</td>
<td>source ip of request</td>
</tr>
</tbody>
</table>
<h3>Resource</h3>
<p>Resource is the abstraction of the object operated by the request in the Nacos authentication plugin. It is mainly defined by Nacos, which can be a configuration, a service, or a group.</p>
<p>Resource mainly consists of the following:</p>
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>namespaceId</td>
<td>Namespace ID of the requested resource, some interfaces may not have this value</td>
</tr>
<tr>
<td>group</td>
<td>The group name of the requested resource, some interfaces may not have this value</td>
</tr>
<tr>
<td>name</td>
<td>The resource name of the requested resource, such as the service name or the configuration dataId, some interfaces may be defined special values, such as <code>nacos/admin</code></td>
</tr>
<tr>
<td>type</td>
<td>The type of the requested resource, which may be an enumeration value in <code>SignType</code>, which mainly represents the module related to the resource</td>
</tr>
<tr>
<td>properties</td>
<td>The extended configuration of the requested resource, which does not belong to the above-mentioned resource-related information, will be placed in properties, such as the Request name of the Grpc request or the tags on the <code>@Secured</code> annotation, etc.</td>
</tr>
</tbody>
</table>
<h3>Action</h3>
<p>Action is the abstraction of the request operation in the Nacos authentication plugin, mainly include the read operation <code>R</code> and write operation <code>W</code>. For details, see the <code>ActionTypes</code> enumeration.</p>
<h2>Server Plugin</h2>
<p>To develop a Nacos server-side authentication plugin, developer first need to depend on the relevant API of the authentication plugin.</p>
<pre><code class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.nacos<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>nacos-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><code>${project.version}</code> is the version of Nacos for your development plugin.</p>
<p>Then implement interface <code>com.alibaba.nacos.plugin.auth.spi.server.AuthPluginService</code>, and put your implementation into services of SPI.</p>
<p>The methods of interface in following:</p>
<table>
<thead>
<tr>
<th>method name</th>
<th>parameters</th>
<th>returns</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>getAuthServiceName</td>
<td>void</td>
<td>String</td>
<td>The name of the plugin. When the name is the same, the plugin loaded later will overwrite the plugin loaded first.</td>
</tr>
<tr>
<td>identityNames</td>
<td>void</td>
<td>Collection<String></td>
<td>The identity context keywords of the plugin. Nacos will obtain the parameters with these keywords as the key from the request and inject them into the IdentityContext.</td>
</tr>
<tr>
<td>enableAuth</td>
<td>ActionTypes,SignType</td>
<td>boolean</td>
<td>Called before <code>validateIdentity</code> and <code>validateAuthority</code>, the plugin can decide whether to authenticate this type of operation or this type of module.</td>
</tr>
<tr>
<td>validateIdentity</td>
<td>IdentityContext, Resource</td>
<td>boolean</td>
<td>Validate identity, called before <code>validateAuthority</code></td>
</tr>
<tr>
<td>validateAuthority</td>
<td>IdentityContext, Permission</td>
<td>boolean</td>
<td>Validate permissions, called when <code>validateIdentity</code> returns <code>true</code></td>
</tr>
</tbody>
</table>
<h3>Load Server Plugin</h3>
<p>After the plugin finished, it needs to be packaged into jar/zip and places in the classpath of the nacos server. If you don't know how to add plugins into the classpath, please place plugins under <code>${nacos-server.path}/plugins</code> directly.</p>
<p>After Adding plugins into classpath, also need to modify some configuration in <code>${nacos-server.path}/conf/application.properties</code>.</p>
<pre><code class="language-properties">### The plugin name nacos using，should be same as the return value of  `com.alibaba.nacos.plugin.auth.spi.server.AuthPluginService#getAuthServiceName`
nacos.core.auth.system.type=${authServiceName}

### open authorization
nacos.core.auth.enabled=true
</code></pre>
<p>Restart nacos cluster, and after any request, some logs can be saw in <code>${nacos-server.path}/logs/core-auth.log</code>:</p>
<pre><code class="language-text">[AuthPluginManager] Load AuthPluginService(xxxx) AuthServiceName(xxx) successfully.
</code></pre>
<h3>Use the default Nacos authentication plugin</h3>
<p>Nacos provides a simple authentication plugin. It is a weak authentication system to prevent business misuse, not a strong authentication system to prevent malicious attacks. The usage detail see <a href="https://nacos.io/en-us/docs/auth.html">User Guide-Authentication</a>.</p>
<h2>Client Plugin</h2>
<p>The authentication plugin for Nacos Client is to inject authentication-related identity context into the request so that each request can be recognized by the server authentication plugin.</p>
<p>The Java client of Nacos comes with two implementations by default:</p>
<ul>
<li>A default implementation using <code>username</code>,<code>password</code> and <code>accessToken</code>;</li>
<li>An Aliyun implementation using <code>accessKey</code> and <code>secretKey</code>.</li>
</ul>
<h3>Default implementation</h3>
<p>When <code>username</code>, <code>password</code> are included in the properties passed into a nacos client instance, the nacos client will use the simple authentication plugin to inject identity context;
e.g.:</p>
<pre><code class="language-java">Properties properties = <span class="hljs-keyword">new</span> Properties();
properties.setProperty(PropertyKeyConst.SERVER_ADDR, <span class="hljs-string">"localhost:8848"</span>);
properties.setProperty(PropertyKeyConst.USERNAME, <span class="hljs-string">"nacos"</span>);
properties.setProperty(PropertyKeyConst.PASSWORD, <span class="hljs-string">"nacos"</span>);
NamingFactory.createNamingService(properties);
ConfigFactory.createConfigService(properties);
</code></pre>
<p>The plugin will login through <code>username</code> and <code>password</code> asynchronously, and obtain the <code>accessToken</code> after the login is successful. Finally, the plugin will inject the <code>accessToken</code> into all requests, which make the server plugins can validate identity and permission according to <code>accessToken</code>.</p>
<h3>Aliyun implementation</h3>
<p>When <code>accessKey</code> and <code>secretKey</code> are included in the properties, the nacos client will use the aliyun authentication plugin to inject identity context.</p>
<p>e.g.:</p>
<pre><code class="language-java">Properties properties = <span class="hljs-keyword">new</span> Properties();
properties.setProperty(PropertyKeyConst.SERVER_ADDR, <span class="hljs-string">"localhost:8848"</span>);
properties.setProperty(PropertyKeyConst.ACCESS_KEY, <span class="hljs-string">"nacos"</span>);
properties.setProperty(PropertyKeyConst.SECRET_KEY, <span class="hljs-string">"nacos"</span>);
NamingFactory.createNamingService(properties);
ConfigFactory.createConfigService(properties);
</code></pre>
<p>The plugin will generate signatures by <code>accessKey</code>, <code>secretKey</code> and the request resource, and inject into the request.</p>
<p>The identity context may be different for the different request resource:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Identity keys</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NamingService</td>
<td>ak</td>
<td>accessKey</td>
</tr>
<tr>
<td>NamingService</td>
<td>signature</td>
<td>naming signature</td>
</tr>
<tr>
<td>NamingService</td>
<td>data</td>
<td>signature datum, include timestamp</td>
</tr>
<tr>
<td>ConfigService</td>
<td>Spas-AccessKey</td>
<td>accessKey</td>
</tr>
<tr>
<td>ConfigService</td>
<td>Spas-Signature</td>
<td>config signature</td>
</tr>
<tr>
<td>ConfigService</td>
<td>Timestamp</td>
<td>request timestamp</td>
</tr>
<tr>
<td>ConfigService</td>
<td>Spas-SecurityToken</td>
<td>Temporary token (used when Alibaba Cloud STS function is enabled)</td>
</tr>
</tbody>
</table>
<p>Developers can validate authentication and authorization in the server plugin based on the above information.</p>
<h3>Custom Plugin</h3>
<p>Considering that the developer's authentication plugin may have custom identity keywords, the Java client of Nacos can also use the SPI to inject the plugin implementation.</p>
<p>To develop a Nacos client authentication plugin, developers first need to depend on the relevant API of the authentication plugin.</p>
<pre><code class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.nacos<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>nacos-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><code>${project.version}</code> is the version of Nacos for your development plugin.</p>
<p>Then implement interface <code>com.alibaba.nacos.plugin.auth.spi.client.ClientAuthService</code>, and put your implementation into services of SPI.</p>
<p>The methods of interface in following:</p>
<table>
<thead>
<tr>
<th>method name</th>
<th>parameters</th>
<th>returns</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>setServerList</td>
<td>List<String>,Nacos server address list</td>
<td>void</td>
<td>Called during initialization, to inject the Nacos service list, which is convenient for plugins to access the nacos server, such as calling the login interface, etc.</td>
</tr>
<tr>
<td>setNacosRestTemplate</td>
<td>NacosRestTemplate,http client for Nacos</td>
<td>void</td>
<td>Called during initialization, to inject Nacos' http client, which is convenient for plugins to access the nacos server, such as calling the login interface, etc.</td>
</tr>
<tr>
<td>login</td>
<td>Properties,properties of initialization</td>
<td>boolean</td>
<td>mainly performs the conversion of identity context, such as <code>username</code>, <code>password</code> is converted to <code>accessToken</code></td>
</tr>
<tr>
<td>getLoginIdentityContext</td>
<td>Resource</td>
<td>IdentityContext</td>
<td>Get the identity context converted by the login interface, and the client will inject all the content of the returned object into the request</td>
</tr>
</tbody>
</table>
<p>Developers can choose to inherit <code>com.alibaba.nacos.plugin.auth.spi.client.AbstractClientAuthService</code>, which implements <code>setServerList</code> and <code>setNacosRestTemplate</code>.</p>
<p>Then package the developed client plugin into jar/zip and put it into the classpath of your application and take effect automatically.</p>
<h3>Plugin for other programming language</h3>
<p>TODO</p>
</div></div></section><footer class="footer-container" data-reactid="184"><div class="footer-body" data-reactid="185"><img src="/img/nacos_gray.png" data-reactid="186"/><div class="cols-container" data-reactid="187"><div class="col col-12" data-reactid="188"><h3 data-reactid="189">Vision</h3><p data-reactid="190">By providing an easy-to-use service infrastructure such as dynamic service discovery, service configuration, service sharing and management and etc., Nacos help users better construct, deliver and manage their own service platform, reuse and composite business service faster and deliver value of business innovation more quickly so as to win market for users in the era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div><div class="col col-6" data-reactid="191"><dl data-reactid="192"><dt data-reactid="193">Documentation</dt><dd data-reactid="194"><a href="/en-us/docs/what-is-nacos.html" target="_self" data-reactid="195">Overview</a></dd><dd data-reactid="196"><a href="/en-us/docs/quick-start.html" target="_self" data-reactid="197">Quick start</a></dd><dd data-reactid="198"><a href="/en-us/docs/contributing.html" target="_self" data-reactid="199">Developer guide</a></dd></dl></div><div class="col col-6" data-reactid="200"><dl data-reactid="201"><dt data-reactid="202">Resources</dt><dd data-reactid="203"><a href="/en-us/community/index.html" target="_self" data-reactid="204">Community</a></dd><dd data-reactid="205"><a href="https://cn.aliyun.com/product/aliware/mse?spm=nacos-website.topbar.0.0.0" target="_self" data-reactid="206">Cloud Service MSE</a></dd><dd data-reactid="207"><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target="_self" data-reactid="208">Cloud Service EDAS</a></dd><dd data-reactid="209"><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target="_self" data-reactid="210">Cloud Service AHAS</a></dd></dl></div></div><div class="copyright" data-reactid="211"><span data-reactid="212">@ 2022 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js">
	</script>
	<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e3a5cec56ef8619cf9d7c2abebd509e3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
</body>
</html>